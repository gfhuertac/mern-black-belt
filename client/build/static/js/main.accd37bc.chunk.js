(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),c=a(11),r=a.n(c),o=(a(60),a(2)),s=(a(61),a(62),a(30)),m=a(10),i=a.n(m),u=(a(41),a(50)),d=a.n(u),E=a(20),p=function(e){var t=e.poll;return l.a.createElement("div",{className:"card border-dark mb-3"},l.a.createElement("div",{className:"row no-gutters"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement(E.a,{data:t.options.map((function(e,a){return{angle:t.votes.reduce((function(t,a){return a.option===e?t+1:t}),0),name:e}})),showLabels:!0,width:150,height:150})),l.a.createElement("div",{className:"col-md-8"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h5",{className:"card-title"},l.a.createElement("a",{href:!0,onClick:function(a){return e.setPage(["vote",{poll:t}])}},t.question)),l.a.createElement("p",{className:"card-text"},t.options.map((function(e,a){var n=t.votes.reduce((function(t,a){return a.option===e?t+1:t}),0);return l.a.createElement("span",{key:a},e,": ",n," votes. ")}))),l.a.createElement("p",{className:"card-text"},l.a.createElement("small",{className:"text-muted"},"(",l.a.createElement(d.a,{parse:"YYYY-MM-DDTHH:mm:ss.SSSZ",tz:"America/Santiago",fromNow:!0},t.createdAt),")"))))))},v=a(7),f=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],r=a[1],m=Object(n.useState)([]),u=Object(o.a)(m,2),d=u[0],E=u[1],f=Object(n.useState)([]),b=Object(o.a)(f,2),N=b[0],h=b[1];return Object(n.useEffect)((function(){i.a.get("http://localhost:8000/api/polls").then((function(e){var t=Object(s.a)(e.data).sort((function(e,t){return t.number_of_votes-e.number_of_votes})).slice(0,3);E(t);var a=Object(s.a)(e.data).filter((function(e){return-1===t.indexOf(e)}));h(a)})).catch((function(e){return r(e)}))}),[]),l.a.createElement(l.a.Fragment,null,""!==c&&l.a.createElement(v.a,{variant:"danger"},l.a.createElement("p",null,c)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"}),l.a.createElement("div",{className:"col clearfix"},l.a.createElement("button",{type:"button",className:"btn btn-primary float-right",onClick:function(t){return e.setPage(["create",{}])}},"Create your own poll"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("h2",null,"Top 3 polls"),l.a.createElement("div",{className:"content"},0!==d.length&&d.map((function(t,a){return l.a.createElement(p,{key:a,poll:t,setPage:e.setPage})})),0===d.length&&l.a.createElement("div",null,"No poll available"))),l.a.createElement("div",{className:"col"},l.a.createElement("h2",null,"Recent polls"),l.a.createElement("div",{className:"content"},0!==N.length&&N.map((function(t,a){return l.a.createElement(p,{key:a,poll:t,setPage:e.setPage})})),0===N.length&&l.a.createElement("div",null,"No poll available")))))},b=function(e){var t=e.setPage,a=Object(n.useState)(""),c=Object(o.a)(a,2),r=c[0],s=c[1],m=Object(n.useState)(""),u=Object(o.a)(m,2),d=u[0],E=u[1],p=Object(n.useState)(""),f=Object(o.a)(p,2),b=f[0],N=f[1],h=Object(n.useState)(""),g=Object(o.a)(h,2),O=g[0],w=g[1],y=Object(n.useState)(""),j=Object(o.a)(y,2),x=j[0],k=j[1],S=Object(n.useState)(""),P=Object(o.a)(S,2),C=P[0],T=P[1];return l.a.createElement(l.a.Fragment,null,""!==C&&l.a.createElement(v.a,{variant:"danger"},l.a.createElement("p",null,C)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"}),l.a.createElement("div",{className:"col clearfix"},l.a.createElement("button",{type:"button",className:"btn btn-primary float-right",onClick:function(t){return e.setPage(["home",{}])}},"Go back"))),l.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),r.length<10)return T("Question is required and must be at least 10 characters long");var a=[];if(""!==d&&a.push(d),""!==b&&a.push(b),""!==O&&a.push(O),""!==x&&a.push(x),r.length<10)return T("Question is required and must be at least 10 characters long");if(a.length<2)return T("Options must be at least 2");T(""),i.a.post("http://localhost:8000/api/polls",{question:r,options:a,votes:[],number_of_votes:0}).then((function(e){return t(["home",{}])})).catch((function(e){return T(e.message)}))}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"questionTextArea"},"Your Question: *"),l.a.createElement("input",{type:"text",className:"form-control",id:"questionTextArea",rows:"3",onChange:function(e){return s(e.target.value)}}))),l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"option1Text"},"Option 1: *"),l.a.createElement("input",{type:"text",className:"form-control",id:"option1Text",onChange:function(e){return E(e.target.value)}})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"}),l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"option2Text"},"Option 2: *"),l.a.createElement("input",{type:"text",className:"form-control",id:"option2Text",onChange:function(e){return N(e.target.value)}})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"}),l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"option3Text"},"Option 3: "),l.a.createElement("input",{type:"text",className:"form-control",id:"option3Text",onChange:function(e){return w(e.target.value)}})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(t){return e.setPage(["home",{}])}},"Cancel"),"\xa0",l.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit Poll"),l.a.createElement("br",null),"NOTE: fields marked with an * are mandatory"),l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"option4Text"},"Option 4: "),l.a.createElement("input",{type:"text",className:"form-control",id:"option4Text",onChange:function(e){return k(e.target.value)}}))))))},N=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],r=a[1],s=e.poll,m=e.setPage,u=["btn-primary","btn-secondary","btn-success","btn-info"];return l.a.createElement(l.a.Fragment,null,""!==c&&l.a.createElement(v.a,{variant:"danger"},l.a.createElement("p",null,c)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"}),l.a.createElement("div",{className:"col clearfix"},l.a.createElement("button",{type:"button",className:"btn btn-primary float-right",onClick:function(t){return e.setPage(["home",{}])}},"Go back"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("h2",null,s.question))),l.a.createElement("div",{className:"d-flex flex-wrap"},s.options.map((function(e,t){return l.a.createElement("div",{key:t,className:"card",style:{width:"40%",margin:"1% 5%"}},l.a.createElement("div",{className:"card-body"},l.a.createElement("h5",{className:"card-title"},e)),l.a.createElement("div",{className:"card-footer"},l.a.createElement("button",{onClick:function(t){!function(e,t){e.preventDefault(),i.a.post("http://localhost:8000/api/poll/".concat(s._id,"/vote"),{option:t}).then((function(e){m(["result",{poll:e.data}])})).catch((function(e){return r(e.message)}))}(t,e)},className:"btn ".concat(u[t])},"Vote ",e)))}))))},h=function(e){var t=e.poll,a=e.setPage,n=["red","blue","orange","green"];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"}),l.a.createElement("div",{className:"col clearfix"},l.a.createElement("button",{type:"button",className:"btn btn-primary float-right",onClick:function(e){return a(["home",{}])}},"Go back"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement(v.a,{variant:"success"},"Thanks for voting! Here are the results."),l.a.createElement("h2",null,t.question))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement(E.a,{className:"donut-chart-example",innerRadius:100,radius:140,data:t.options.map((function(e,a){return{angle:t.votes.reduce((function(t,a){return a.option===e?t+1:t}),0),label:e,color:n[a]}})),showLabels:!0,width:300,height:300})),l.a.createElement("div",{className:"col"},t.options.map((function(e,a){var n=t.votes.reduce((function(t,a){return a.option===e?t+1:t}),0);return l.a.createElement("div",{key:a,className:"d-flex"},l.a.createElement("div",{className:"mr-auto p-2"},e),l.a.createElement("div",{className:"p-2"},n," votes"))}))),l.a.createElement("div",{className:"col"})))};var g=function(){var e=Object(n.useState)(["home",{}]),t=Object(o.a)(e,2),a=t[0],c=t[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"jumbotron jumbotron-fluid"},l.a.createElement("div",{className:"container"},l.a.createElement("h1",{className:"display-4"},"Voting Dojo"))),l.a.createElement("div",{className:"App"},"home"===a[0]&&l.a.createElement(f,{setPage:c}),"create"===a[0]&&l.a.createElement(b,{setPage:c}),"vote"===a[0]&&l.a.createElement(N,{poll:a[1].poll,setPage:c}),"result"===a[0]&&l.a.createElement(h,{poll:a[1].poll,setPage:c})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},55:function(e,t,a){e.exports=a(104)},60:function(e,t,a){},62:function(e,t,a){}},[[55,1,2]]]);
//# sourceMappingURL=main.accd37bc.chunk.js.map